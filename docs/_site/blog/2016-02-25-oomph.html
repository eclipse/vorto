<!DOCTYPE html>
<html>

  <!--Head section for CSS/Javascript  -->

<head>
  <meta charset="utf-8">
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <meta name="description" content="IoT Toolset that lets you describe the characteristics of real world devices, share them in a central repository and generate code for different platforms">
  <meta name="author" content="">
  <!--base to have relative path for offline navigation -->





 
  <title>Eclipse Vorto - IoT Toolset for standardized device descriptions</title>

  <!--Stylesheets-->
  <!-- Bootstrap 3.3.1 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <!-- Font Awesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
  <!-- Custom CSS -->
  <link href="../css/vorto.css" rel="stylesheet">

  <!--Javascript-->
  <!-- JQuery 2.1.1-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <!-- Bootstrap 3.3.1 JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="../js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
               $(document).ready(function(){
                 $("a[rel^='prettyPhoto']").prettyPhoto();
               });
             </script>
</head>


  <body>
    <!--Header section Site navigation -->

<!--base to have relative path for offline navigation -->





 

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
				<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="../index.html">Eclipse Vorto</a>
				</div>
				<div class="collapse navbar-collapse wow fadeIn" id="navbar-collapse" data-wow-delay="0.2s">
						<ul class="nav navbar-nav pull-right">
							
								<li >
									
										<a href="../news/index.html">News</a>

									
								</li>
							
								<li >
									
										<a href="../blog/index.html">Blog</a>

									
								</li>
							
								<li >
									
										<a href="../documentation/overview/introduction.html">Documentation</a>

									
								</li>
							
								<li >
									
										<a href="../downloads/index.html">Downloads</a>

									
								</li>
							
								<li >
									
										<a target="_blank" href="http://vorto.eclipse.org/repo">Model Repository</a>
									
								</li>
							
								<li >
									
										<a href="../overview/vorto_overview.html">Use cases</a>

									
								</li>
							
						</ul>
				</div>
				<!-- /.navbar-collapse -->
		</div>
		<style>#forkongithub a{background:#8d0c0c;color:#fff;text-decoration:none;font-family:Arial, Helvetica, sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:12px;line-height:3rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#c11;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:fixed;display:block;top:0;right:0;width:50px;overflow:visible;height:200px;z-index:9999;}#forkongithub a{width:260px;position:absolute;top:40px;right:-60px;transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);}}</style><span id="forkongithub"><a href="https://github.com/eclipse/vorto">Fork me on GitHub</a></span>
		<!-- /.container -->
</nav>

      <!--base to have relative path for offline navigation -->





 
<div class="container content">
  <div class="row">
    <div class="span12">
    <div class="page-header pull-left">
        <h3>
          <a href="../blog/index.html">Go Back</a>
      </h3>
    </div>
    <div class="page-header pull-right">
        <a href="https://github.com/eclipse/vorto/tree/development/docs/blog" target="_blank"><h4>Add a new blog post!</h4></a>
    </div>
       </div>
  </div>


    <h2>Automate Vorto development environment setup using Oomph</h2>
    <div class="postmetadata">
      <ul>
        
           <li>
            <i class="icon-user"></i>
            <a href="https://github.com/gavinying">Shaodong Ying</a>
          </li>

           
        <li>
          <i class="icon-calendar"></i> Jan 22, 2016
        </li>
    </ul>
    </div>
    <section>
	  <!--base to have relative path for offline navigation -->

<p>This blog tells how to use oomph to automate the annoying eclipse environment setup for Eclipse Vorto project. Although the depicted code is for Vorto project, the concept and procedure work for all Eclipse based project, it could be easily customized to help your own project. </p>

<!--more-->
<p>## Why need automation? ##</p>

<p>Eclipse is probably the most popular free IDE platform in the world, there are a lot of open-source projects using Eclipse as their development environment. Thanks to its notable extensible plug-in design, developers are encouraged to integrate many useful third-party tools and even their own features to extend the standard Eclipse framework to meet the project requirements. However, on the other side, more and more plug-ins and thier version dependencies make Eclipse seems vunarable and causes a lot of headache for developers to setup a proper development environment. Moreover, it could be the very first but probably most effective roadblock for potential interesed developers to join an open-source project. Say Vorto :)</p>

<h2 id="what-is-oomph">What is Oomph?</h2>

<p>Oomph is an Eclipse plug-in designed to automate the installation and update of Eclipse development environment, recently it is adopted by Eclipse fundation and becomes the official Eclipse installer. 
<a href="http://www.eclipse.org/oomph">Oomph project</a> website provides more details. Basically, it is kind of script engine to manage Eclipse development environment installation, including Eclipse framework installation, third-party plug-ins installation, github clone, project import, project build, etc. So that users just need to set a few parameters, simple as the installation folder and should be given a complete workable environment after the installation process done. </p>

<h2 id="how-to-make-it-running">How to make it running?</h2>

<p>As what I mentioned, Oomph is a script engine, so we need to write a script, called setup file in context to tell (define) Oomph how to setup the needed environment. </p>

<p>The setup for Vorto project is a little bit challenging, because Vorto uses DSL(Domain specific language), which requires dynamically generate java source code during installation process. </p>

<ul>
  <li>Generate 4 java source files from xtend code using MWE2 workflows after project import (before project build);</li>
  <li>Manage the sequence of MWE2 workflows due to dependency of the xtend code; </li>
</ul>

<p>First, download Oomph (Eclipse installer) from Eclipse website (<a href="https://wiki.eclipse.org/Eclipse_Installer">https://wiki.eclipse.org/Eclipse_Installer</a>) and install it following the <a href="https://wiki.eclipse.org/Eclipse_Oomph_Authoring#Installing_Oomph">official instruction</a>; 
Then we could use Oomph setup project model wizard to generate a basic tempelate for Vorto project. </p>

<p><img src="../img/blogpics/oomph_setup.jpg" alt="Oomph setup project model wizard" /></p>

<p>The XML format setup file will be generated under (Oomph git path)/setups folder. </p>

<p>Then we need to add required plug-ins for P2Task, </p>

<pre><code>&lt;setupTask
    xsi:type="setup.p2:P2Task"
    id="p2.install"&gt;
  &lt;requirement
      name="org.eclipse.wst.xml_ui.feature.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.m2e.feature.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.m2e.logback.feature.feature.group"/&gt;
  &lt;requirement
      name="org.sonatype.m2e.buildhelper.feature.feature.group"/&gt;
  &lt;requirement
      name="org.sonatype.tycho.m2e.feature.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.xtext.sdk.feature.group"
      versionRange="[2.8.0,2.9.0)"/&gt;
  &lt;requirement
      name="org.eclipse.mylyn.java_feature.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.mylyn.git.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.pde.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.wst.jsdt.feature.feature.group"/&gt;
  &lt;requirement
      name="org.eclipse.wst.web_ui.feature.feature.group"/&gt;
  &lt;repository
      url="http://repo1.maven.org/maven2/.m2e/connectors/m2eclipse-buildhelper/0.15.0/N/0.15.0.201207090124/"/&gt;
  &lt;repository
      url="http://repo1.maven.org/maven2/.m2e/connectors/m2eclipse-tycho/0.8.0/N/0.8.0.201409231215/"/&gt;
  &lt;repository
      url="http://download.itemis.com/updates/"/&gt;
  &lt;repository
      url="http://download.itemis.de/updates/"/&gt;
  &lt;repository
      url="http://download.itemis.de/updates/releases"/&gt;
  &lt;repository
      url="http://download.eclipse.org/egit/updates"/&gt;
  &lt;repository
      url="http://download.eclipse.org/modeling/tmf/xtext/updates/releases/2.9.0/"/&gt;
  &lt;repository
      url="http://download.eclipse.org/modeling/emft/mwe/updates/releases/2.8.2/"/&gt;
&lt;/setupTask&gt;
</code></pre>

<p>Then we need to confirm the git clone configuration, </p>

<pre><code>&lt;setupTask
    xsi:type="git:GitCloneTask"
    id="git.clone.vorto"
    remoteURI="https://github.com/eclipse/vorto.git"
    checkoutBranch="development"&gt;
  &lt;annotation
      source="http://www.eclipse.org/oomph/setup/InducedChoices"&gt;
    &lt;detail
        key="label"&gt;
      &lt;value&gt;Eclipse Vorto Git Repository&lt;/value&gt;
    &lt;/detail&gt;
  &lt;/annotation&gt;
  &lt;description&gt;Eclipse Vorto&lt;/description&gt;
&lt;/setupTask&gt;
</code></pre>

<p>Then, import the source code using maven, </p>

<pre><code>&lt;setupTask
    xsi:type="maven:MavenImportTask"
    id="import.maven.vorto"&gt;
  &lt;sourceLocator
      rootFolder="${git.clone.vorto.location}"
      locateNestedProjects="true"/&gt;
&lt;/setupTask&gt;
</code></pre>

<p>Then, setup target platform, here we are using the existing VortoTargetPlatform setup file; </p>

<pre><code>&lt;setupTask
    xsi:type="pde:TargetPlatformTask"
    id="vorto.target"
    name="VortoTargetPlatform"&gt;
  &lt;description&gt;Manually maintained target platform&lt;/description&gt;
&lt;/setupTask&gt;
</code></pre>

<p>Finally, generate java source code using MWE2 workflows, they should follow the exact sequence, and build the whole project after code generation; </p>

<pre><code>&lt;setupTask
    xsi:type="setup:CompoundTask"
    name="Mwe2 Generation"&gt;
  &lt;setupTask
      xsi:type="launching:LaunchTask"
      id="launch.generate.datatype"
      launcher="1_Generate_Datatype"/&gt;
  &lt;setupTask
      xsi:type="launching:LaunchTask"
      id="launch.generate.functionblock"
      launcher="2_Generate_Functionblock"/&gt;
  &lt;setupTask
      xsi:type="launching:LaunchTask"
      id="launch.generate.infomodel"
      launcher="3_Generate_Infomodel"/&gt;
  &lt;setupTask
      xsi:type="launching:LaunchTask"
      id="launch.generate.mapping"
      launcher="4_Generate_Mapping"/&gt;
  &lt;setupTask
      xsi:type="projects:ProjectsBuildTask"
      id="build_after_code_generation"
      refresh="true"/&gt;
&lt;/setupTask&gt;
</code></pre>

<p>OK. Done! 
The complete setup file (<a href="../img/blogpics/Vorto.setup">Vorto.setup</a>) could be downloaded here. </p>

<p>You could drag and drop into Eclipse Installer runtime to try it out. 
Enjoy!</p>



     


</div>

<!-- Pagination -->

</div>

    <!-- Footer -->
<footer>
   <div class="container">
   <div class="row">
         <div class="col-md-4">
           <h3 class="footer-links-header">Quick Links</h3>
           <ul class="footer-links clearfix">
             <li><a href="http://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
             <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
             <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
             <li><a href="http://www.eclipse.org/legal/">Legal</a></li>
           </ul>
           <ul class="footer-links clearfix">
             <li><a href="http://www.eclipse.org">Eclipse Home</a></li>
             <li><a href="http://marketplace.eclipse.org/">Market Place</a></li>
             <li><a href="http://live.eclipse.org/">Eclipse Live</a></li>
             <li><a href="http://www.planeteclipse.org/">Eclipse Planet</a></li>
           </ul>
           </div>
         <div class="col-md-2">
          <h3 class="footer-links-header"><a href="http://eclipse.org/forums/eclipse.vorto" target="_blank" >Vorto Forum</a></h3>
         </div>
         <div class="col-md-6" data-twttr-id="twttr-sandbox-0">
           <h3 class="footer-links-header"><a href="https://twitter.com/VortoIoT">Vorto</a> on Twitter</h3>
           <a class="twitter-timeline"  href="https://twitter.com/VortoIoT" data-widget-id="624061088770994176" nofooter noborders noheader transparent height="250">Tweets by @VortoIoT</a>
           <script>
             !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            </script>
         </div>
       </div>
   </div>
</footer>

<!--/.Footer-->


  </body>

</html>
